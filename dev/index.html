<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KnowRob: KnowRob</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-knowrob.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KnowRob
   &#160;<span id="projectnumber">dev</span>
   </div>
   <div id="projectbrief">AKnowledgeBaseSystemforCognition-enabledRobots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">KnowRob </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><object type="image/svg+xml" data="https://github.com/knowrob/knowrob/workflows/CI/badge.svg" style="pointer-events: none;">CI</object></p>
<p>KnowRob is a knowledge processing system designed for robots. Its purpose is to equip robots with the capability to organize information in re-usable knowledge chunks, and to perform reasoning in an expressive logic. It further provides a set of tools for visualization and acquisition of knowledge.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Getting Started</h1>
<p>These instructions will get you a copy of KnowRob up and running on your local machine.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h2>
<ul>
<li>ROS (<em>ROS noetic</em> for the master branch)</li>
<li>SWI Prolog &gt;= 8.2.4 (see <a href="https://github.com/artnie/knowrob/tree/update-setup#further-information">Further Information</a>)</li>
<li>mongo DB server &gt;= 4.4 and libmongoc (see <a href="https://github.com/artnie/knowrob/tree/update-setup#further-information">Further Information</a>)</li>
<li><a href="https://github.com/knowrob/rosprolog">rosprolog</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Installation</h2>
<p>KnowRob uses the <a href="http://wiki.ros.org/catkin">catkin</a> buildsystem that has been the main ROS buildsystem. We have prepared different *.rosinstall* setup files that you can add to your ROS workspace as described <a href="http://www.ros.org/wiki/ROS/Tutorials/InstallingandConfiguringROSEnvironment">here</a>.</p>
<div class="fragment"><div class="line">rosdep update</div>
<div class="line">cd ~/catkin_ws/src</div>
<div class="line">wstool init</div>
<div class="line">wstool merge https://raw.github.com/knowrob/knowrob/master/rosinstall/knowrob-base.rosinstall</div>
<div class="line">wstool update</div>
<div class="line">rosdep install --ignore-src --from-paths .</div>
<div class="line">cd ~/catkin_ws</div>
<div class="line">catkin_make</div>
</div><!-- fragment --><p>You may further need to set the <em>SWI_HOME_DIR</em> environment variable to the installation location of <em>swipl</em>:</p>
<div class="fragment"><div class="line">export SWI_HOME_DIR=/usr/lib/swi-prolog</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Launching</h2>
<p>In order to interact with other robot components, the <a href="https://www.ros.org/">Robot Operating System</a> (ROS) is used via <a href="https://github.com/knowrob/rosprolog">rosprolog</a>. <em>rosprolog</em> provides a ROS node that manages a pool of Prolog engines in which KnowRob can be loaded such that its querying interface is exposed via the node. KnowRob provides a launch file that starts the <em>rosprolog</em> node, and initializes KnowRob:</p>
<div class="fragment"><div class="line">roslaunch knowrob knowrob.launch</div>
</div><!-- fragment --><p>Please refer to the <em>rosprolog</em> documentation for how to interact with this node. However, KnowRob can also be launched without ROS node through a script offered by <em>rosprolog</em>:</p>
<div class="fragment"><div class="line">rosrun rosprolog rosprolog knowrob</div>
</div><!-- fragment --><p>Launching KnowRob without the ROS node may help debugging (at the moment the GUI tracing tool of SWI Prolog <em>gtrace</em> does not work via the rosprolog node).</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Getting Familiar</h1>
<p>Here we provide an overview about functionality of KnowRob.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Querying</h2>
<p>The core of KnowRob is an extendible querying interface that provides basic operations <em>ask</em>, <em>tell</em>, <em>forget</em>, and <em>remember</em>. Their argument is some statement written in the KnowRob Querying Language. Language phrases are terms whose semantics is defined in form of Prolog rules using special operators such as <em>?&gt;</em> (the ask operator), or <em>+&gt;</em> (the tell operator).</p>
<p>One useful CLI for queries is launched with <code>rosrun rosprolog rosprolog_commandline.py</code></p>
<h2><a class="anchor" id="autotoc_md6"></a>
Model</h2>
<p>KnowRob structures knowledge according to models represented using RDF. Some models are very basic and domain-independent such as the OWL model that e.g. distinguishes between object and datatype properties, or the toplevel ontology SOMA which is supported by KnowRob. KnowRob Models is a collection of such models that are explicitely supported by KnowRob. However, support for other models may be added through plugins.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Triple Store and Data Access</h2>
<p>Knowledge is represented in form of temporalized triples &ndash; each subject-predicate-object triple has an additional field that restricts the temporal scope in which the statement represented by the triple is true. A configurable knowledgeGraph is used to store and retrieve temporalized triples &ndash; as a falback implementation, KnowRob provides a simple MongoDB implementation of a temporalized triple store.</p>
<p>One important aspect in knowledge representation for robots is that a lot of knowledge is <em>implicitly</em> encoded in the control structures of the robot. Hence, one goal is to make the knowledge in robot control structures <em>explicit</em>. KnowRob does that through <em>Ontology-based Data Access</em> (OBDA). So called, <em>semantic data accessors</em> are used to map data to symbols in an ontology, often by accessing some database, or by reading from a message queue, etc.</p>
<p>For more information on database backends in KnowRob, please have a look <a class="el" href="src_2backend_2_r_e_a_d_m_e_8md.html">here</a>.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Reasoning</h2>
<p>KnowRob uses an ensemble of reasoners approach where inferences of different reasoners are combined into correlated knowledge pieces. The reason for choosing this approach is that there is no single formalism that is suited for every reasoning tasks. Instead, given a problem, one should decide what the most suitable formalism is to tackle it. Consequently, KnowRob can be configured to solve specific problems by loading corresponding reasoning modules that implement a common interface. KnowRob also ships with a set of reasoning modules including an (incomplete) OWL reasoner, a SWRL reasoner, and some specialized reasoning modules that handle domain-specific problems such as reasoning about time intervals using Allen's interval calculus. More complete information about reasoning in KnowRob can be found here.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Further Information</h1>
<p>More documentation can be found in the following subpages:</p>
<ul>
<li><a class="el" href="src_2sources_2_r_e_a_d_m_e_8md.html">Ontologies</a></li>
<li><a class="el" href="src_2queries_2_r_e_a_d_m_e_8md.html">Querying</a></li>
<li><a class="el" href="src_2backend_2_r_e_a_d_m_e_8md.html">Backends</a></li>
<li><a class="el" href="src_2reasoner_2_r_e_a_d_m_e_8md.html">Reasoner</a></li>
<li><a class="el" href="src_2alignment_2_r_e_a_d_m_e_8md.html">Alignment</a></li>
<li><a class="el" href="src_2ros_2_r_e_a_d_m_e_8md.html">ROS</a></li>
</ul>
<p>In addition, the following resources are available:</p><ul>
<li>Sourcecode documentation is available <a href="https://knowrob.github.io/knowrob/">here</a></li>
<li>A blog and more wiki pages are available at <a href="http://www.knowrob.org">knowrob.org</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Installation of SWI-Prolog and MongoDB</h2>
<ul>
<li>SWI Prolog latest stable version</li>
</ul>
<div class="fragment"><div class="line"># If swi-prolog is already installed, check the version</div>
<div class="line">swipl --version</div>
<div class="line"># If it&#39;s under 8.2.4, add the ppa of the latest stable version</div>
<div class="line">sudo apt-add-repository -y ppa:swi-prolog/stable</div>
<div class="line"># And update it</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt upgrade</div>
<div class="line"># or install it, if not present before.</div>
<div class="line">sudo apt install swi-prolog</div>
</div><!-- fragment --><ul>
<li>MongoDB</li>
</ul>
<div class="fragment"><div class="line"># Check the mongodb version</div>
<div class="line">mongod --version</div>
<div class="line"># If below 4.4, an update is needed.</div>
<div class="line"># Updating the mongodb requires either wiping all existing DBs or dumping/restoring them.</div>
<div class="line"># Newer versions are not compatible with old DBs and wouldn&#39;t even allow the mongodb service to start</div>
<div class="line"># Therefore, if you want to keep old DBs, store them BEFORE upgading mongodb.</div>
<div class="line"># The following procedure reinstalls mongodb completely with the desired version. </div>
<div class="line"># All previous deps, settings, DBs of mongodb will be lost!</div>
<div class="line"> </div>
<div class="line"># Stop the service</div>
<div class="line">sudo systemctl stop mongod.service</div>
<div class="line"># Remove all DBs</div>
<div class="line">sudo rm -r /var/log/mongodb</div>
<div class="line">sudo rm -r /var/lib/mongodb</div>
<div class="line"># Uninstall all mongo packages</div>
<div class="line"># Be aware that this also removes unrelated packages starting with &#39;mongo*&#39;</div>
<div class="line">sudo apt purge mongo*</div>
<div class="line"># Fetch the latest packages of mongodb-org</div>
<div class="line">wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-value add -</div>
<div class="line">echo &quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list</div>
<div class="line"># Update references and install mongodb</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install mongodb-org</div>
<div class="line"> </div>
<div class="line"># Troubleshoot: If dpkg errors occurr, the deps still refer to old versions. Force the new version</div>
<div class="line"># Replace the &lt;version&gt; with your own new version. To this day it is &#39;4.4.10&#39;. </div>
<div class="line">sudo dpkg -i --force-overwrite /var/cache/apt/archives/mongodb-org-tools_4.4.&lt;version&gt;_amd64.deb</div>
<div class="line"> </div>
<div class="line"># Try to run the mongodb service</div>
<div class="line">sudo systemctl start mongod.service</div>
<div class="line"># Check if the service is running properly</div>
<div class="line">sudo systemctl status mongod.service</div>
<div class="line"># Optional: Make the mongod service start on boot</div>
<div class="line">sudo systemctl enable mongod.service</div>
<div class="line"> </div>
<div class="line"># In case of errors, refer to the mongodb error code explaination for further insight: </div>
<div class="line"># https://github.com/mongodb/mongo/blob/master/src/mongo/util/exit_code.h</div>
<div class="line"># Status 62 identifies old DBs in /var/log and /var/lib, so delete them.</div>
<div class="line"># To instead keep them, you&#39;ll need to downgrade mongo, dump DBs, upgrade mongo, recreate DBs.</div>
<div class="line"># When it fails to open /var/log/mongodb/mongod.log the permissons for that file are incorrect.</div>
<div class="line"># Either set owner and group of these two paths to mongodb, or reinstall mongodb.</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
