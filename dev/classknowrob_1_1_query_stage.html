<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KnowRob: knowrob::QueryStage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-knowrob.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KnowRob
   &#160;<span id="projectnumber">dev</span>
   </div>
   <div id="projectbrief">AKnowledgeBaseSystemforCognition-enabledRobots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classknowrob_1_1_query_stage.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classknowrob_1_1_query_stage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">knowrob::QueryStage Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for knowrob::QueryStage:</div>
<div class="dyncontent">
<div class="center"><img src="classknowrob_1_1_query_stage__inherit__graph.png" border="0" usemap="#knowrob_1_1_query_stage_inherit__map" alt="Inheritance graph"/></div>
<map name="knowrob_1_1_query_stage_inherit__map" id="knowrob_1_1_query_stage_inherit__map">
<area shape="rect" title=" " alt="" coords="136,155,299,181"/>
<area shape="rect" href="classknowrob_1_1_typed_query_stage.html" title=" " alt="" coords="5,229,205,271"/>
<area shape="rect" href="classknowrob_1_1_typed_query_stage.html" title=" " alt="" coords="229,229,429,271"/>
<area shape="rect" href="classknowrob_1_1_token_broadcaster.html" title=" " alt="" coords="117,80,318,107"/>
<area shape="rect" href="classknowrob_1_1_token_stream.html" title=" " alt="" coords="132,5,303,32"/>
<area shape="rect" href="classknowrob_1_1_modal_stage.html" title=" " alt="" coords="248,319,411,345"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for knowrob::QueryStage:</div>
<div class="dyncontent">
<div class="center"><img src="classknowrob_1_1_query_stage__coll__graph.png" border="0" usemap="#knowrob_1_1_query_stage_coll__map" alt="Collaboration graph"/></div>
<map name="knowrob_1_1_query_stage_coll__map" id="knowrob_1_1_query_stage_coll__map">
<area shape="rect" title=" " alt="" coords="25,155,187,181"/>
<area shape="rect" href="classknowrob_1_1_token_broadcaster.html" title=" " alt="" coords="5,80,207,107"/>
<area shape="rect" href="classknowrob_1_1_token_stream.html" title=" " alt="" coords="21,5,191,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage_1_1_pusher.html">Pusher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a81e1e47c23ac118490d01ef13d659c31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a81e1e47c23ac118490d01ef13d659c31">QueryStage</a> (<a class="el" href="namespaceknowrob.html#a91545eb3e730ee9de8eb464a62359455">QueryContextPtr</a> ctx)</td></tr>
<tr class="separator:a81e1e47c23ac118490d01ef13d659c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ba1c8cde5c9117bcc93c2e7763eddc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#aa4ba1c8cde5c9117bcc93c2e7763eddc">~QueryStage</a> ()</td></tr>
<tr class="separator:aa4ba1c8cde5c9117bcc93c2e7763eddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59aaa5ce72b8f99650e8e3dd9cce7eb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a59aaa5ce72b8f99650e8e3dd9cce7eb7">close</a> () override</td></tr>
<tr class="separator:a59aaa5ce72b8f99650e8e3dd9cce7eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2888c02696d641577dd5de8dbd0ef4cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a2888c02696d641577dd5de8dbd0ef4cf">isQueryOpened</a> () const</td></tr>
<tr class="separator:a2888c02696d641577dd5de8dbd0ef4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a56346bf0cf1bdbaaa29ffac195ba34"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a7a56346bf0cf1bdbaaa29ffac195ba34">hasStopRequest</a> () const</td></tr>
<tr class="separator:a7a56346bf0cf1bdbaaa29ffac195ba34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknowrob_1_1_token_broadcaster"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknowrob_1_1_token_broadcaster')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknowrob_1_1_token_broadcaster.html">knowrob::TokenBroadcaster</a></td></tr>
<tr class="memitem:ae421b29b97213fce26c4ab8f9f5f04ae inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#ae421b29b97213fce26c4ab8f9f5f04ae">TokenBroadcaster</a> ()</td></tr>
<tr class="separator:ae421b29b97213fce26c4ab8f9f5f04ae inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0108201f1d1ff21dde3869b63c8e4ebe inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#a0108201f1d1ff21dde3869b63c8e4ebe">~TokenBroadcaster</a> ()</td></tr>
<tr class="separator:a0108201f1d1ff21dde3869b63c8e4ebe inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa41553de029e1221cfaad6514674784 inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#aaa41553de029e1221cfaad6514674784">addSubscriber</a> (const std::shared_ptr&lt; <a class="el" href="classknowrob_1_1_token_stream_1_1_channel.html">Channel</a> &gt; &amp;subscriber)</td></tr>
<tr class="separator:aaa41553de029e1221cfaad6514674784 inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104a97841dd5c1aebd9fba274fb6f338 inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#a104a97841dd5c1aebd9fba274fb6f338">removeSubscriber</a> (const std::shared_ptr&lt; <a class="el" href="classknowrob_1_1_token_stream_1_1_channel.html">Channel</a> &gt; &amp;subscriber)</td></tr>
<tr class="separator:a104a97841dd5c1aebd9fba274fb6f338 inherit pub_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknowrob_1_1_token_stream"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknowrob_1_1_token_stream')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknowrob_1_1_token_stream.html">knowrob::TokenStream</a></td></tr>
<tr class="memitem:aa9190a1864f989c530aa6c470750d2d8 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#aa9190a1864f989c530aa6c470750d2d8">TokenStream</a> ()</td></tr>
<tr class="separator:aa9190a1864f989c530aa6c470750d2d8 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16519782e35e74b26236c729c6b94f8c inherit pub_methods_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a16519782e35e74b26236c729c6b94f8c">~TokenStream</a> ()</td></tr>
<tr class="separator:a16519782e35e74b26236c729c6b94f8c inherit pub_methods_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523769bbc932ee8abcf14ffbe192df11 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a523769bbc932ee8abcf14ffbe192df11">TokenStream</a> (const <a class="el" href="classknowrob_1_1_token_stream.html">TokenStream</a> &amp;)=delete</td></tr>
<tr class="separator:a523769bbc932ee8abcf14ffbe192df11 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ec6b71a49b561514ae4293c862b628 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a99ec6b71a49b561514ae4293c862b628">isOpened</a> () const</td></tr>
<tr class="separator:a99ec6b71a49b561514ae4293c862b628 inherit pub_methods_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a08a6e1d98dd98a581bf848abdcf64fed"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">ActiveQuery</a> = std::pair&lt; <a class="el" href="namespaceknowrob.html#a61600f12fb2dcaeabd67e3baf0e9b534">TokenBufferPtr</a>, std::shared_ptr&lt; <a class="el" href="classknowrob_1_1_token_stream.html">TokenStream</a> &gt; &gt;</td></tr>
<tr class="separator:a08a6e1d98dd98a581bf848abdcf64fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439bd76212f67f5532e80bd49dd95fda"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a439bd76212f67f5532e80bd49dd95fda">ActiveQueryIter</a> = std::list&lt; <a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">ActiveQuery</a> &gt;::iterator</td></tr>
<tr class="separator:a439bd76212f67f5532e80bd49dd95fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6ebfe58c2aead707a18d77ed33821cec"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceknowrob.html#a61600f12fb2dcaeabd67e3baf0e9b534">TokenBufferPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a6ebfe58c2aead707a18d77ed33821cec">submitQuery</a> (const <a class="el" href="classknowrob_1_1_bindings.html">Bindings</a> &amp;substitution)=0</td></tr>
<tr class="separator:a6ebfe58c2aead707a18d77ed33821cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece12e1690f167cc0e7f7b1eb7fd5d1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#aece12e1690f167cc0e7f7b1eb7fd5d1e">pushTransformed</a> (const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;transformedToken, <a class="el" href="classknowrob_1_1_query_stage.html#a439bd76212f67f5532e80bd49dd95fda">ActiveQueryIter</a> graphQueryIterator)</td></tr>
<tr class="separator:aece12e1690f167cc0e7f7b1eb7fd5d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a978ffe940e223fe03eb8d1e9fbce875f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a978ffe940e223fe03eb8d1e9fbce875f">push</a> (const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;tok) override</td></tr>
<tr class="separator:a978ffe940e223fe03eb8d1e9fbce875f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e25f4a09f4257e47cade7c056ada653"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a3e25f4a09f4257e47cade7c056ada653">pushDeferred</a> ()</td></tr>
<tr class="separator:a3e25f4a09f4257e47cade7c056ada653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classknowrob_1_1_token_broadcaster"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classknowrob_1_1_token_broadcaster')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classknowrob_1_1_token_broadcaster.html">knowrob::TokenBroadcaster</a></td></tr>
<tr class="memitem:ae9087b3033f8a50ec0d66c4f89732bc5 inherit pro_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#ae9087b3033f8a50ec0d66c4f89732bc5">push</a> (const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;tok) override</td></tr>
<tr class="separator:ae9087b3033f8a50ec0d66c4f89732bc5 inherit pro_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a724700e4582ebb9d8272134046380b25 inherit pro_methods_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a> (const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;tok)</td></tr>
<tr class="separator:a724700e4582ebb9d8272134046380b25 inherit pro_methods_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classknowrob_1_1_token_stream"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classknowrob_1_1_token_stream')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classknowrob_1_1_token_stream.html">knowrob::TokenStream</a></td></tr>
<tr class="memitem:a5967a05a5acf0b48c22ea79267d6059c inherit pro_methods_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a5967a05a5acf0b48c22ea79267d6059c">push</a> (<a class="el" href="classknowrob_1_1_token_stream_1_1_channel.html">Channel</a> &amp;channel, const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;tok)</td></tr>
<tr class="separator:a5967a05a5acf0b48c22ea79267d6059c inherit pro_methods_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:afe31fbb28cebd266fc53ebe05d83b34e"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">isQueryOpened_</a></td></tr>
<tr class="separator:afe31fbb28cebd266fc53ebe05d83b34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6998ddbdddcc04a3e0b7e5783891fa45"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a6998ddbdddcc04a3e0b7e5783891fa45">isAwaitingInput_</a></td></tr>
<tr class="separator:a6998ddbdddcc04a3e0b7e5783891fa45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafaca55f807ae21b064bc06bebb5542"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a></td></tr>
<tr class="separator:aeafaca55f807ae21b064bc06bebb5542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa37fb8cf173110cfdbcbdb779d17d4"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#adfa37fb8cf173110cfdbcbdb779d17d4">hasPositiveAnswer_</a></td></tr>
<tr class="separator:adfa37fb8cf173110cfdbcbdb779d17d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66791a3392d36a7fa402ff0c4585630b"><td class="memItemLeft" align="right" valign="top">std::weak_ptr&lt; <a class="el" href="classknowrob_1_1_query_stage.html">QueryStage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a66791a3392d36a7fa402ff0c4585630b">selfWeakRef_</a></td></tr>
<tr class="separator:a66791a3392d36a7fa402ff0c4585630b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaaf02c3a7813b06e4ce486bc14e465f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespaceknowrob.html#a7b072febfde476200a8e1d635f7d1155">AnswerNoPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a></td></tr>
<tr class="separator:aeaaf02c3a7813b06e4ce486bc14e465f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84a9840a07b1974a455243bab785634"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespaceknowrob.html#adb256f64fd8ae82e961e4ccc72e3c981">AnswerDontKnowPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a></td></tr>
<tr class="separator:ae84a9840a07b1974a455243bab785634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b4c309a4bdcf872c1e04fb6b374126"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">ActiveQuery</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a></td></tr>
<tr class="separator:a98b4c309a4bdcf872c1e04fb6b374126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b8e5cb93f014221690c157dda65cca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceknowrob.html#a91545eb3e730ee9de8eb464a62359455">QueryContextPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#ad9b8e5cb93f014221690c157dda65cca">ctx_</a></td></tr>
<tr class="separator:ad9b8e5cb93f014221690c157dda65cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classknowrob_1_1_token_broadcaster"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classknowrob_1_1_token_broadcaster')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classknowrob_1_1_token_broadcaster.html">knowrob::TokenBroadcaster</a></td></tr>
<tr class="memitem:ac1ddef19339b0348ad68cf98a7315365 inherit pro_attribs_classknowrob_1_1_token_broadcaster"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; Channel &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_broadcaster.html#ac1ddef19339b0348ad68cf98a7315365">subscribers_</a></td></tr>
<tr class="separator:ac1ddef19339b0348ad68cf98a7315365 inherit pro_attribs_classknowrob_1_1_token_broadcaster"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classknowrob_1_1_token_stream"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classknowrob_1_1_token_stream')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classknowrob_1_1_token_stream.html">knowrob::TokenStream</a></td></tr>
<tr class="memitem:a681bb24876eff72b7daee114e1002a72 inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; <a class="el" href="classknowrob_1_1_token_stream_1_1_channel.html">Channel</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a681bb24876eff72b7daee114e1002a72">channels_</a></td></tr>
<tr class="separator:a681bb24876eff72b7daee114e1002a72 inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a5659bad10062066b96c4ea25242bb inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a17a5659bad10062066b96c4ea25242bb">isOpened_</a></td></tr>
<tr class="separator:a17a5659bad10062066b96c4ea25242bb inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503fc0b3deec52d9c2a103b0020f4373 inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_token_stream.html#a503fc0b3deec52d9c2a103b0020f4373">channel_mutex_</a></td></tr>
<tr class="separator:a503fc0b3deec52d9c2a103b0020f4373 inherit pro_attribs_classknowrob_1_1_token_stream"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a2ef187fef30fe6180a6d14dcfe36403c"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknowrob_1_1_query_stage.html#a2ef187fef30fe6180a6d14dcfe36403c">KnowledgeBase</a></td></tr>
<tr class="separator:a2ef187fef30fe6180a6d14dcfe36403c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A step within a query pipeline. </p>

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00020">20</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a08a6e1d98dd98a581bf848abdcf64fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08a6e1d98dd98a581bf848abdcf64fed">&#9670;&nbsp;</a></span>ActiveQuery</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">knowrob::QueryStage::ActiveQuery</a> =  std::pair&lt;<a class="el" href="namespaceknowrob.html#a61600f12fb2dcaeabd67e3baf0e9b534">TokenBufferPtr</a>, std::shared_ptr&lt;<a class="el" href="classknowrob_1_1_token_stream.html">TokenStream</a>&gt; &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00061">61</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="a439bd76212f67f5532e80bd49dd95fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a439bd76212f67f5532e80bd49dd95fda">&#9670;&nbsp;</a></span>ActiveQueryIter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classknowrob_1_1_query_stage.html#a439bd76212f67f5532e80bd49dd95fda">knowrob::QueryStage::ActiveQueryIter</a> =  std::list&lt;<a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">ActiveQuery</a>&gt;::iterator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00062">62</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a81e1e47c23ac118490d01ef13d659c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e1e47c23ac118490d01ef13d659c31">&#9670;&nbsp;</a></span>QueryStage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QueryStage::QueryStage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceknowrob.html#a91545eb3e730ee9de8eb464a62359455">QueryContextPtr</a>&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00018">18</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        : <a class="code" href="classknowrob_1_1_token_broadcaster.html#ae421b29b97213fce26c4ab8f9f5f04ae">TokenBroadcaster</a>(),</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;          <a class="code" href="classknowrob_1_1_query_stage.html#ad9b8e5cb93f014221690c157dda65cca">ctx_</a>(std::move(ctx)),</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;          <a class="code" href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">isQueryOpened_</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;          <a class="code" href="classknowrob_1_1_query_stage.html#a6998ddbdddcc04a3e0b7e5783891fa45">isAwaitingInput_</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;          <a class="code" href="classknowrob_1_1_query_stage.html#adfa37fb8cf173110cfdbcbdb779d17d4">hasPositiveAnswer_</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;          <a class="code" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a>(<span class="keyword">false</span>) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4ba1c8cde5c9117bcc93c2e7763eddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ba1c8cde5c9117bcc93c2e7763eddc">&#9670;&nbsp;</a></span>~QueryStage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueryStage::~QueryStage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00027">27</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                        {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="classknowrob_1_1_query_stage.html#a59aaa5ce72b8f99650e8e3dd9cce7eb7">QueryStage::close</a>();</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a59aaa5ce72b8f99650e8e3dd9cce7eb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59aaa5ce72b8f99650e8e3dd9cce7eb7">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QueryStage::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Request the stage to stop any active processes. This will not necessary cause the processes to immediately exit, but will ensure no more messages will be pushed into the output stream of this stage. </p>

<p>Reimplemented from <a class="el" href="classknowrob_1_1_token_stream.html#a57308f33245034a741bfb9fd49b08de4">knowrob::TokenStream</a>.</p>

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00031">31</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                       {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// toggle on stop request</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// clear all graph queries</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair: <a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        pair.first-&gt;close();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        pair.second-&gt;close();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    }</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.clear();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// close all channels</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classknowrob_1_1_token_stream.html#a57308f33245034a741bfb9fd49b08de4">TokenStream::close</a>();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a56346bf0cf1bdbaaa29ffac195ba34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a56346bf0cf1bdbaaa29ffac195ba34">&#9670;&nbsp;</a></span>hasStopRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool knowrob::QueryStage::hasStopRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true if it has been requested that the stage stops any active processes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00042">42</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2888c02696d641577dd5de8dbd0ef4cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2888c02696d641577dd5de8dbd0ef4cf">&#9670;&nbsp;</a></span>isQueryOpened()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool knowrob::QueryStage::isQueryOpened </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true if query is still active. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00037">37</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">isQueryOpened_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a978ffe940e223fe03eb8d1e9fbce875f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a978ffe940e223fe03eb8d1e9fbce875f">&#9670;&nbsp;</a></span>push()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QueryStage::push </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>tok</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classknowrob_1_1_token_stream.html#a26b72709c482adcd37f843ba5c28f52a">knowrob::TokenStream</a>.</p>

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00119">119</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                         {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;indicatesEndOfEvaluation()) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="comment">// EOS indicates that no more input is to be expected</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="classknowrob_1_1_query_stage.html#a6998ddbdddcc04a3e0b7e5783891fa45">isAwaitingInput_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">// only broadcast EOS if no graph query is still active.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.empty() &amp;&amp; !<a class="code" href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">hasStopRequest_</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="classknowrob_1_1_query_stage.html#a3e25f4a09f4257e47cade7c056ada653">pushDeferred</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">isQueryOpened_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(tok);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok-&gt;isAnswerToken()) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keyword">auto</span> answer = std::static_pointer_cast&lt;const Answer&gt;(tok);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classknowrob_1_1_query_stage.html#a2888c02696d641577dd5de8dbd0ef4cf">isQueryOpened</a>()) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <a class="code" href="_logger_8h.html#aeac265ff5c2e571914c85c6cf2d343a6">KB_WARN</a>(<span class="stringliteral">&quot;ignoring attempt to write to a closed stream.&quot;</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (answer-&gt;isPositive()) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keyword">auto</span> positiveAnswer = std::static_pointer_cast&lt;const AnswerYes&gt;(answer);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="comment">// create a reference on self from a weak reference</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keyword">auto</span> selfRef = <a class="code" href="classknowrob_1_1_query_stage.html#a66791a3392d36a7fa402ff0c4585630b">selfWeakRef_</a>.lock();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">if</span> (!selfRef) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// submit a query</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keyword">auto</span> graphQueryStream = <a class="code" href="classknowrob_1_1_query_stage.html#a6ebfe58c2aead707a18d77ed33821cec">submitQuery</a>(*positiveAnswer-&gt;substitution());</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="comment">// combine graph query answer with partialResult.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="comment">// note that this is done in the same thread as the graph query is executed.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keyword">auto</span> merger = std::make_shared&lt;AnswerMerger&gt;(positiveAnswer);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            graphQueryStream &gt;&gt; merger;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">// from there it must be pushed into this stage again.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="comment">// the stage could be destroyed in the meantime. but through the weak reference counter we can</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="comment">// create a step here that holds a reference to this stage.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keyword">auto</span> pusher = std::make_shared&lt;Pusher&gt;(selfRef);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keyword">auto</span> pair = <a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.emplace_front(graphQueryStream, pusher);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keyword">auto</span> graphQueryIt = <a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.begin();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            pusher-&gt;graphQueryIterator_ = graphQueryIt;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            merger &gt;&gt; pusher;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">// start sending messages into AnswerTransformer.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">// the messages are buffered before to avoid them being lost before the transformer</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="comment">// is connected.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            graphQueryStream-&gt;stopBuffering();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="comment">// the previous stage has already determined that the query is not satisfiable,</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="comment">// or had no evidence to conclude it is true or false.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="comment">// we can stop here, and avoid evaluation of remaining literals.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="comment">// This assumes &quot;no&quot; is only send by precious stage when no &quot;yes&quot; is expected anymore.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(answer);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">// push any other token</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(tok);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e25f4a09f4257e47cade7c056ada653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e25f4a09f4257e47cade7c056ada653">&#9670;&nbsp;</a></span>pushDeferred()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QueryStage::pushDeferred </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00093">93</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                              {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// all positive answers are pushed directly, only negative answers are deferred.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// but only push a negative answer if no positive answer has been produced.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classknowrob_1_1_query_stage.html#adfa37fb8cf173110cfdbcbdb779d17d4">hasPositiveAnswer_</a>) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.empty() || <a class="code" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a>.empty()) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.size() == 1) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(<a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.front());</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keyword">auto</span> no = std::make_shared&lt;AnswerNo&gt;();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.empty()) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    no-&gt;setIsUncertain(<span class="keyword">true</span>, std::nullopt);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;x: <a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                        no-&gt;mergeWith(*x);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(no);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(<a class="code" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a>.front());</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.clear();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a>.clear();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aece12e1690f167cc0e7f7b1eb7fd5d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece12e1690f167cc0e7f7b1eb7fd5d1e">&#9670;&nbsp;</a></span>pushTransformed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QueryStage::pushTransformed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceknowrob.html#a19d7372a6c791363d6b2a13dcaca8c94">TokenPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>transformedToken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classknowrob_1_1_query_stage.html#a439bd76212f67f5532e80bd49dd95fda">ActiveQueryIter</a>&#160;</td>
          <td class="paramname"><em>graphQueryIterator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8cpp_source.html#l00048">48</a> of file <a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                                                  {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// this function is called after the reasoning process has been completed,</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// transformedTok represents the response to the query.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (transformedTok-&gt;indicatesEndOfEvaluation()) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.erase(graphQueryIterator);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="comment">// only push EOS message if no query is still active and</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// if the stream has received EOS as input already.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">activeQueries_</a>.empty() &amp;&amp; !<a class="code" href="classknowrob_1_1_query_stage.html#a6998ddbdddcc04a3e0b7e5783891fa45">isAwaitingInput_</a>) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="classknowrob_1_1_query_stage.html#a3e25f4a09f4257e47cade7c056ada653">pushDeferred</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <a class="code" href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">isQueryOpened_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(transformedTok);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classknowrob_1_1_query_stage.html#a2888c02696d641577dd5de8dbd0ef4cf">isQueryOpened</a>()) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">// note that pushing of &quot;no&quot; must be deferred, because it could be that another</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">// instance of the query is asked with response &quot;yes&quot; later.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (transformedTok-&gt;isAnswerToken()) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keyword">auto</span> answer = std::static_pointer_cast&lt;const Answer&gt;(transformedTok);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="keywordflow">if</span> (answer-&gt;isPositive()) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="classknowrob_1_1_query_stage.html#adfa37fb8cf173110cfdbcbdb779d17d4">hasPositiveAnswer_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="comment">// if a positive answer is received, all deferred negative answers can be discarded.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.clear();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                <a class="code" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a>.clear();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="comment">// directly push any positive response</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(transformedTok);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="comment">// close the stage if only one solution is requested</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="classknowrob_1_1_query_stage.html#ad9b8e5cb93f014221690c157dda65cca">ctx_</a>-&gt;queryFlags &amp; (<span class="keywordtype">int</span>) <a class="code" href="namespaceknowrob.html#a578764e9b706d0bede894d7676e08d81a41f7883420af012cb6bd4b9c9efd4932">QueryFlag::QUERY_FLAG_ONE_SOLUTION</a>) ==</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    (<span class="keywordtype">int</span>) <a class="code" href="namespaceknowrob.html#a578764e9b706d0bede894d7676e08d81a41f7883420af012cb6bd4b9c9efd4932">QueryFlag::QUERY_FLAG_ONE_SOLUTION</a>) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(<a class="code" href="classknowrob_1_1_end_of_evaluation.html#a1a1c0f6d3096d54abf05515d0056ea2a">EndOfEvaluation::get</a>());</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    <a class="code" href="classknowrob_1_1_query_stage.html#a59aaa5ce72b8f99650e8e3dd9cce7eb7">close</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (answer-&gt;isNegative()) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">deferredNegativeAnswers_</a>.emplace_back(std::static_pointer_cast&lt;const AnswerNo&gt;(answer));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <a class="code" href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">deferredDontKnowAnswers_</a>.emplace_back(std::static_pointer_cast&lt;const AnswerDontKnow&gt;(answer));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="comment">// push any other token</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">pushToBroadcast</a>(transformedTok);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ebfe58c2aead707a18d77ed33821cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ebfe58c2aead707a18d77ed33821cec">&#9670;&nbsp;</a></span>submitQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceknowrob.html#a61600f12fb2dcaeabd67e3baf0e9b534">TokenBufferPtr</a> knowrob::QueryStage::submitQuery </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classknowrob_1_1_bindings.html">Bindings</a> &amp;&#160;</td>
          <td class="paramname"><em>substitution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Submits a query using given substitution mapping. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">substitution</td><td>a mapping from variables to terms. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an answer buffer. </dd></dl>

<p>Implemented in <a class="el" href="classknowrob_1_1_typed_query_stage.html#a3bbaabe5c2e32578b8a6edad098ac05a">knowrob::TypedQueryStage&lt; QueryType &gt;</a>, and <a class="el" href="classknowrob_1_1_typed_query_stage.html#a3bbaabe5c2e32578b8a6edad098ac05a">knowrob::TypedQueryStage&lt; Formula &gt;</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a2ef187fef30fe6180a6d14dcfe36403c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef187fef30fe6180a6d14dcfe36403c">&#9670;&nbsp;</a></span>KnowledgeBase</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classknowrob_1_1_knowledge_base.html">KnowledgeBase</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00092">92</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a98b4c309a4bdcf872c1e04fb6b374126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b4c309a4bdcf872c1e04fb6b374126">&#9670;&nbsp;</a></span>activeQueries_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classknowrob_1_1_query_stage.html#a08a6e1d98dd98a581bf848abdcf64fed">ActiveQuery</a>&gt; knowrob::QueryStage::activeQueries_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00063">63</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="ad9b8e5cb93f014221690c157dda65cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9b8e5cb93f014221690c157dda65cca">&#9670;&nbsp;</a></span>ctx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceknowrob.html#a91545eb3e730ee9de8eb464a62359455">QueryContextPtr</a> knowrob::QueryStage::ctx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00064">64</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="ae84a9840a07b1974a455243bab785634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae84a9840a07b1974a455243bab785634">&#9670;&nbsp;</a></span>deferredDontKnowAnswers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespaceknowrob.html#adb256f64fd8ae82e961e4ccc72e3c981">AnswerDontKnowPtr</a>&gt; knowrob::QueryStage::deferredDontKnowAnswers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00059">59</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="aeaaf02c3a7813b06e4ce486bc14e465f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaaf02c3a7813b06e4ce486bc14e465f">&#9670;&nbsp;</a></span>deferredNegativeAnswers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespaceknowrob.html#a7b072febfde476200a8e1d635f7d1155">AnswerNoPtr</a>&gt; knowrob::QueryStage::deferredNegativeAnswers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00058">58</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="adfa37fb8cf173110cfdbcbdb779d17d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa37fb8cf173110cfdbcbdb779d17d4">&#9670;&nbsp;</a></span>hasPositiveAnswer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; knowrob::QueryStage::hasPositiveAnswer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00056">56</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="aeafaca55f807ae21b064bc06bebb5542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafaca55f807ae21b064bc06bebb5542">&#9670;&nbsp;</a></span>hasStopRequest_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; knowrob::QueryStage::hasStopRequest_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00055">55</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="a6998ddbdddcc04a3e0b7e5783891fa45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6998ddbdddcc04a3e0b7e5783891fa45">&#9670;&nbsp;</a></span>isAwaitingInput_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; knowrob::QueryStage::isAwaitingInput_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00054">54</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="afe31fbb28cebd266fc53ebe05d83b34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe31fbb28cebd266fc53ebe05d83b34e">&#9670;&nbsp;</a></span>isQueryOpened_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; knowrob::QueryStage::isQueryOpened_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00053">53</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<a id="a66791a3392d36a7fa402ff0c4585630b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66791a3392d36a7fa402ff0c4585630b">&#9670;&nbsp;</a></span>selfWeakRef_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::weak_ptr&lt;<a class="el" href="classknowrob_1_1_query_stage.html">QueryStage</a>&gt; knowrob::QueryStage::selfWeakRef_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_query_stage_8h_source.html#l00057">57</a> of file <a class="el" href="_query_stage_8h_source.html">QueryStage.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/knowrob/queries/<a class="el" href="_query_stage_8h_source.html">QueryStage.h</a></li>
<li>src/queries/<a class="el" href="_query_stage_8cpp_source.html">QueryStage.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_adfa37fb8cf173110cfdbcbdb779d17d4"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#adfa37fb8cf173110cfdbcbdb779d17d4">knowrob::QueryStage::hasPositiveAnswer_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; hasPositiveAnswer_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00056">QueryStage.h:56</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_end_of_evaluation_html_a1a1c0f6d3096d54abf05515d0056ea2a"><div class="ttname"><a href="classknowrob_1_1_end_of_evaluation.html#a1a1c0f6d3096d54abf05515d0056ea2a">knowrob::EndOfEvaluation::get</a></div><div class="ttdeci">static auto &amp; get()</div><div class="ttdef"><b>Definition:</b> <a href="_end_of_evaluation_8h_source.html#l00021">EndOfEvaluation.h:21</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a66791a3392d36a7fa402ff0c4585630b"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a66791a3392d36a7fa402ff0c4585630b">knowrob::QueryStage::selfWeakRef_</a></div><div class="ttdeci">std::weak_ptr&lt; QueryStage &gt; selfWeakRef_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00057">QueryStage.h:57</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a59aaa5ce72b8f99650e8e3dd9cce7eb7"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a59aaa5ce72b8f99650e8e3dd9cce7eb7">knowrob::QueryStage::close</a></div><div class="ttdeci">void close() override</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8cpp_source.html#l00031">QueryStage.cpp:31</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_ae84a9840a07b1974a455243bab785634"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#ae84a9840a07b1974a455243bab785634">knowrob::QueryStage::deferredDontKnowAnswers_</a></div><div class="ttdeci">std::vector&lt; AnswerDontKnowPtr &gt; deferredDontKnowAnswers_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00059">QueryStage.h:59</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a3e25f4a09f4257e47cade7c056ada653"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a3e25f4a09f4257e47cade7c056ada653">knowrob::QueryStage::pushDeferred</a></div><div class="ttdeci">void pushDeferred()</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8cpp_source.html#l00093">QueryStage.cpp:93</a></div></div>
<div class="ttc" id="anamespaceknowrob_html_a578764e9b706d0bede894d7676e08d81a41f7883420af012cb6bd4b9c9efd4932"><div class="ttname"><a href="namespaceknowrob.html#a578764e9b706d0bede894d7676e08d81a41f7883420af012cb6bd4b9c9efd4932">knowrob::QUERY_FLAG_ONE_SOLUTION</a></div><div class="ttdeci">@ QUERY_FLAG_ONE_SOLUTION</div><div class="ttdef"><b>Definition:</b> <a href="_query_context_8h_source.html#l00017">QueryContext.h:17</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a6998ddbdddcc04a3e0b7e5783891fa45"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a6998ddbdddcc04a3e0b7e5783891fa45">knowrob::QueryStage::isAwaitingInput_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isAwaitingInput_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00054">QueryStage.h:54</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a2888c02696d641577dd5de8dbd0ef4cf"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a2888c02696d641577dd5de8dbd0ef4cf">knowrob::QueryStage::isQueryOpened</a></div><div class="ttdeci">bool isQueryOpened() const</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00037">QueryStage.h:37</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_token_broadcaster_html_a724700e4582ebb9d8272134046380b25"><div class="ttname"><a href="classknowrob_1_1_token_broadcaster.html#a724700e4582ebb9d8272134046380b25">knowrob::TokenBroadcaster::pushToBroadcast</a></div><div class="ttdeci">virtual void pushToBroadcast(const TokenPtr &amp;tok)</div><div class="ttdef"><b>Definition:</b> <a href="_token_broadcaster_8cpp_source.html#l00038">TokenBroadcaster.cpp:38</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_token_stream_html_a57308f33245034a741bfb9fd49b08de4"><div class="ttname"><a href="classknowrob_1_1_token_stream.html#a57308f33245034a741bfb9fd49b08de4">knowrob::TokenStream::close</a></div><div class="ttdeci">virtual void close()</div><div class="ttdef"><b>Definition:</b> <a href="_token_stream_8cpp_source.html#l00022">TokenStream.cpp:22</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_ad9b8e5cb93f014221690c157dda65cca"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#ad9b8e5cb93f014221690c157dda65cca">knowrob::QueryStage::ctx_</a></div><div class="ttdeci">QueryContextPtr ctx_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00064">QueryStage.h:64</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_token_broadcaster_html_ae421b29b97213fce26c4ab8f9f5f04ae"><div class="ttname"><a href="classknowrob_1_1_token_broadcaster.html#ae421b29b97213fce26c4ab8f9f5f04ae">knowrob::TokenBroadcaster::TokenBroadcaster</a></div><div class="ttdeci">TokenBroadcaster()</div><div class="ttdef"><b>Definition:</b> <a href="_token_broadcaster_8cpp_source.html#l00015">TokenBroadcaster.cpp:15</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a98b4c309a4bdcf872c1e04fb6b374126"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a98b4c309a4bdcf872c1e04fb6b374126">knowrob::QueryStage::activeQueries_</a></div><div class="ttdeci">std::list&lt; ActiveQuery &gt; activeQueries_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00063">QueryStage.h:63</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_a6ebfe58c2aead707a18d77ed33821cec"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#a6ebfe58c2aead707a18d77ed33821cec">knowrob::QueryStage::submitQuery</a></div><div class="ttdeci">virtual TokenBufferPtr submitQuery(const Bindings &amp;substitution)=0</div></div>
<div class="ttc" id="a_logger_8h_html_aeac265ff5c2e571914c85c6cf2d343a6"><div class="ttname"><a href="_logger_8h.html#aeac265ff5c2e571914c85c6cf2d343a6">KB_WARN</a></div><div class="ttdeci">#define KB_WARN</div><div class="ttdef"><b>Definition:</b> <a href="_logger_8h_source.html#l00027">Logger.h:27</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_afe31fbb28cebd266fc53ebe05d83b34e"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#afe31fbb28cebd266fc53ebe05d83b34e">knowrob::QueryStage::isQueryOpened_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isQueryOpened_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00053">QueryStage.h:53</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_aeafaca55f807ae21b064bc06bebb5542"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#aeafaca55f807ae21b064bc06bebb5542">knowrob::QueryStage::hasStopRequest_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; hasStopRequest_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00055">QueryStage.h:55</a></div></div>
<div class="ttc" id="aclassknowrob_1_1_query_stage_html_aeaaf02c3a7813b06e4ce486bc14e465f"><div class="ttname"><a href="classknowrob_1_1_query_stage.html#aeaaf02c3a7813b06e4ce486bc14e465f">knowrob::QueryStage::deferredNegativeAnswers_</a></div><div class="ttdeci">std::vector&lt; AnswerNoPtr &gt; deferredNegativeAnswers_</div><div class="ttdef"><b>Definition:</b> <a href="_query_stage_8h_source.html#l00058">QueryStage.h:58</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceknowrob.html">knowrob</a></li><li class="navelem"><a class="el" href="classknowrob_1_1_query_stage.html">QueryStage</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
