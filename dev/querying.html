<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KnowRob: Querying</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-knowrob.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KnowRob
   &#160;<span id="projectnumber">dev</span>
   </div>
   <div id="projectbrief">AKnowledgeBaseSystemforCognition-enabledRobots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('querying.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Querying </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The KnowRob query language supports logic programming syntax. However, language expressions are potentially compiled by KnowRob into other formats such as mongo DB queries in order to unifyWith different backends for query answering. KnowRob orchestrates this process through a pipeline of query steps where different steps are linked with each other by feeding groundings of one step into the input queue of the next step.</p>
<p>The main interface predicates for using the KnowRob query language are <code>kb_call/2</code> and <code>kb_project/2</code>. Their first argument is a language term (such as <code>holds/3</code>), and their second argument is a contextual parameter used to handle scoped statements and questions.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
Language terms</h3>
<p>The binary operators <code>?&gt;</code> (querying operator) and <code>+&gt;</code> (projection operator) are used to declare language terms, and how they are hooked into the querying and projection predicates respectively. Syntactically, these declarations are similar to regular Prolog rules, which, instead, use the operator <code>:-</code>. When such a declaration appears in a module, the code is expanded into additional clauses of the querying and projection predicates. A regular Prolog rule is also generated, but the body of the rule is replaced with a call of the querying or projection predicate with the respective term as argument.</p>
<p>Each call within the body of such a rule is expanded to a call of the querying or projection predicate instead where the language term argument is instantiated to the term called in the original body of the rule. So if we write, for example, <code>is_object(OBJ)</code> on the right-hand side of an querying rule, it is internally expanded to <code>kb_call(is_object(OBJ),Context)</code>. In the case of a projection rule, above expression would expand to <code>kb_project(is_object(OBJ),Context)</code>, which is also meaningful. In such a case, where querying and projection rules can be declared identical within the querying and projection operators, one can also use the operator <code>?+&gt;</code> which expands into both cases to avoid code redundancy.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Scoped questions and statements</h3>
<p>Another aspect of these operators is that they hide the contextual argument from the declaration (above: the <code>Context</code> argument of predicates). This is handy for declaring context-invariant rules. However, rules may be written that retrieve or update the context hidden in the operator. This is possible through a DSL that allows to interact with the hidden context argument.</p>
<p>Within projection rules, context is a tuple of fact scope (also called statement scope), and configuration. The scope of the statement restricts the context in which the statement is true, for example, that some statement is true after some event has happened. The scope must be instantiated before calling the projection predicate. Statements in projection rules expand into scoped assertions. Within querying rules, on the other hand, context has an additional query scope (also called question scope). Question scopes are used to restrict the scope of considered statements to statements with overlapping scopes to the one provided. The querying rule instantiates the statement scope to some scope within which the given statement is true, if any. In case of the term expands into a conjunctive query, the statament scope is instantiated to the intersection of individual statement scopes (if the intersection is not empty).</p>
<p>Special scoping language terms are used to restrict the scope within a nested term. Restrictions of the scope will allways be passed through to child terms, hence the scoping is done in the outer term such as in <code>since(holds(S,P,O),Time)</code>. As these terms are usually defined as operators, one can also write, for example, <code>holds(S,P,O) since Time</code>. Generally, scoping terms are nested terms where another language term is called with an updated scope. In the case of querying-rules, scoping predicates will modify the question scope, while, in the case of projection-rules, the statement scope is modified.</p>
<p>The following time-scoping terms are pre-defined:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>during/2</code> </td><td class="markdownTableBodyNone">The time frame in which a statement holds  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>since/2</code> </td><td class="markdownTableBodyNone">The begin time of a statement being true  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>until/2</code> </td><td class="markdownTableBodyNone">The end time of a statement being true  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
